!function(){void 0===window.$ib3&&(window.$ib3={}),$ib3.utils={createScrolling:function(s,a,e){if(!(s.node()instanceof SVGElement))throw"$Ib3Utils createScrolling - parameter 0 must be svg Element";if(!(a.node()instanceof SVGElement))throw"$Ib3Utils createScrolling - parameter 1 must be svg Element";if(!(e.node()instanceof SVGElement))throw"$Ib3Utils createScrolling - parameter 2 must be svg Element";if(s.node().getBBox().height>a.node().getBBox().height){var l=s.node().getBBox().height-a.node().getBBox().height,t=s.attr("transform"),n=f(t),d=(n.x,n.y),r=e.append("g").attr("transform","translate("+($ib3.config.getChartWidth()-10)+", 0)"),i=d3.scaleLinear().domain([0,l]).range([0,a.node().getBBox().height-$ib3.config.getChartHeight()/10]),o=d3.scaleLinear().domain([0,a.node().getBBox().height-$ib3.config.getChartHeight()/10]).range([0,l]),g=r.append("rect").attr("fill","#d1d1d1").attr("width",10).attr("height",$ib3.config.getChartHeight()/10).attr("y",0).call(d3.drag().on("drag",function(){c()}));function u(){var e=d3.event.wheelDeltaY,t=b(e);0<t&&(t=0),r.select("rect").attr("y",i(-t))}function c(e){var t=d3.event.dy*(e?-1:1),n=parseFloat(g.attr("y"))+t,r=!1,i=!1;n<0?(r=!0,t=n=0):n>a.node().getBBox().height-$ib3.config.getChartHeight()/10&&(i=!0,n=a.node().getBBox().height-$ib3.config.getChartHeight()/10,t=0),g.attr("y",n),b(-o(t),r,i)}function b(e,t,n){var r=s.attr("transform"),i=f(r),a=i.y+e,o=l;o<e&&(dy=o),o<-a||n?a=-o:(d<a||t)&&(a=d);var g="translate("+i.x+","+a+")";return s.attr("transform",r.replace(i.original,g)),a}function f(e){var t=e.indexOf("translate"),n=e.indexOf(")",t),r=e.substring(t,n+1),i=r.substring(10,r.length-1),a=i.split(",");if(2!=a.length&&(a=i.split(" ")),2!=a.length)throw"$Ib3Utils createScrolling - translate transform parse error";return a=$(a).map(function(e,t){return parseFloat(t)}).get(),{original:r,x:a[0],y:a[1]}}a.call(d3.drag().on("drag",function(e){c(!0)})),s.call(d3.drag().on("drag",function(e){c(!0)})),a.on("wheel",u),s.on("wheel",u)}},getVersion:function(){return e},getNumericAbbreviation:g,getShortenNumberByAbbreviation:s,setUpTooltip:function(e,t,n,r){$ib3.config.getCreateTooltipFunction()(e,t,n,r)},showRenderError:function(e){$ib3.config.setErrorMessage(e),$ib3.config.redraw()},setLoadingScreen:function(e,t){$loadingDiv=$(e).find(".loading-screen"),0==$loadingDiv.length&&($loadingDiv=$("<div>").addClass("loading-screen"),$(e).append($loadingDiv),$loadingDiv.append($('<span class="spinner"></span>')),$loadingDiv.append($('<span class="percentage">'+t+"%</span>")));$loadingDiv.find(".percentage").html(t+"%"),100<=t&&$loadingDiv.remove()},setShortenNumber:function(e,t,n,r){if(void 0!==r&&["T","B","M","K"].indexOf(r)<0)throw"$Ib3Utils setShortenNumber - Abbreviation must to be in (T, B, M, K)";if(e=Number(e),!1!==(r=r||!1))return a(e,t,n,r);var i=g(e);return a(e,t,n,i)},getFormattedNumber:function(e,t,n){{if(n){var r=g(e),i=s(e,r),a=t,o=a.substring(a.length-1);return"%"==o?a=a.replace("`%","%").replace("%",r+o):"â‚¬"==o?a=a.substring(0,a.length-2)+r+o:a+=r,$ib3.config.formatNumber(i,a)}return $ib3.config.formatNumber(e,t)}},getWebFOCUSUriByResourcePath:function(e,t){e=e.trim(),t=t||"";var n="";t="/"==(t="undefined"==typeof WFInstallOption_CGIPath?t:WFInstallOption_CGIPath).trim().substring(t.length-1)?t:t+"/",n="IBFS"!=e.substring(0,4)?"http"==e.substring(0,4)||"data:"==e.substring(0,5)||"\\\\"==e.substring(0,2)?e:"/"==e.substring(0,1)?t+e.substring(1):t+e:t+"run.bip?BIP_REQUEST_TYPE=BIP_RUN&BIP_folder="+e.substring(0,e.lastIndexOf("/"))+"&BIP_item="+e.substring(e.lastIndexOf("/")+1);return n}};var e="v1.0.4";function a(e,t,n,r){var i=s(e,r);Number.isInteger(t)&&(new RegExp("\\.\\d{"+(t+1)+",}$").test(""+i)&&(i=i.toFixed(t)));return!1!==n&&(i=Number(i).toFixed(n)),i+r}function g(e){if("NaN"==Number(e))throw"Utils getNumericAbbreviation: "+e+" is not a Number";var t=Math.abs(e);return 1e12<=t?"T":1e9<=t?"B":1e6<=t?"M":1e3<=t?"K":""}function s(e,t){var n;switch(t){case"T":n=e/1e12;break;case"B":n=e/1e9;break;case"M":n=e/1e6;break;case"K":n=e/1e3;break;case"":n=e;break;default:n=e}return n}Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},"undefined"!=typeof module&&(module.exports=$ib3.utils)}();